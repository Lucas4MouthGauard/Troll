@tailwind base;
@tailwind components;
@tailwind utilities;

/* 贴纸化与噪点 */
.sticker { filter: contrast(1.05) saturate(1.1); }
.grain { position: relative; }
.grain::after{
  content:"";position:absolute;inset:0;pointer-events:none;
  mix-blend-mode:multiply;background-image:url('/images/grain.png');
  background-size: 600px auto; opacity:.12
}

/* 企业级文字描边方案 - 避免重叠 */
.thick-outline{ 
  color: #FFD400;
  text-shadow: 
    -2px -2px 0 #000,
    2px -2px 0 #000,
    -2px 2px 0 #000,
    2px 2px 0 #000,
    0px 4px 0 #000,
    0px 8px 0 rgba(0,0,0,0.4);
  font-weight: 700;
  letter-spacing: -0.02em;
}

@media (max-width: 768px) {
  .thick-outline{ 
    text-shadow: 
      -1px -1px 0 #000,
      1px -1px 0 #000,
      -1px 1px 0 #000,
      1px 1px 0 #000,
      0px 2px 0 #000,
      0px 4px 0 rgba(0,0,0,0.4);
  }
}

@media (min-width: 1280px) {
  .thick-outline{ 
    text-shadow: 
      -3px -3px 0 #000,
      3px -3px 0 #000,
      -3px 3px 0 #000,
      3px 3px 0 #000,
      0px 6px 0 #000,
      0px 12px 0 rgba(0,0,0,0.4);
  }
}

/* 抖动 */
@keyframes jitter{
  0%,100%{transform:translate(0,0)}
  25%{transform:translate(1px,-1px)}
  50%{transform:translate(-1px,1px)}
  75%{transform:translate(1px,1px)}
}
.jitter { animation: jitter .18s infinite steps(2,end); }

/* 轻入场 */
@keyframes pop { from{transform:scale(.9);opacity:0} to{transform:scale(1);opacity:1} }
.pop-in { animation: pop .12s ease-out; }

/* Troll 掉落动画 */
@keyframes troll-fall {
  0% {
    transform: translateY(-100vh) rotate(0deg);
    opacity: 1;
  }
  100% {
    transform: translateY(100vh) rotate(720deg);
    opacity: 0.8;
  }
}

.troll-fall {
  animation: troll-fall linear infinite;
}

/* 模板卡片 */
.template-card{
  border:3px solid #000;border-radius:14px;padding:8px;background:#fff;
  box-shadow: 0 8px 0 #111;
}

/* 角标 */
.pill-badge{
  position:absolute; left:8px; top:8px; background:#000; color:#fff;
  font-weight:900; font-size:11px; letter-spacing:.5px; padding:2px 6px; border-radius:6px;
  box-shadow: 0 2px 0 #111; user-select:none
}

/* 动效降级 */
@media (prefers-reduced-motion: reduce) {
  .jitter { animation: none !important; }
  .pop-in { animation: none !important; }
}

/* 像素风格 */
@font-face {
  font-family: 'Pixel';
  src: url('data:font/truetype;charset=utf-8;base64,') format('truetype');
  font-display: swap;
}

/* 像素化字体 */
.pixel-text {
  font-family: 'Courier New', 'Monaco', 'Menlo', monospace;
  image-rendering: pixelated;
  image-rendering: -moz-crisp-edges;
  image-rendering: crisp-edges;
  text-rendering: optimizeSpeed;
  font-smooth: never;
  -webkit-font-smoothing: none;
  -moz-osx-font-smoothing: unset;
}

/* 像素边框效果 */
.pixel-border {
  image-rendering: pixelated;
  image-rendering: -moz-crisp-edges;
  image-rendering: crisp-edges;
}

/* 像素化图片 */
.pixel-image {
  image-rendering: pixelated;
  image-rendering: -moz-crisp-edges;
  image-rendering: crisp-edges;
  image-rendering: -webkit-optimize-contrast;
}

/* 像素化背景 */
.pixel-bg {
  background-image: 
    repeating-linear-gradient(0deg, transparent, transparent 2px, rgba(0,0,0,0.03) 2px, rgba(0,0,0,0.03) 4px),
    repeating-linear-gradient(90deg, transparent, transparent 2px, rgba(0,0,0,0.03) 2px, rgba(0,0,0,0.03) 4px);
  background-size: 4px 4px;
}

/* 像素化按钮效果 */
.pixel-button {
  position: relative;
  transition: all 0.1s;
}

.pixel-button:active {
  transform: translateY(2px);
  box-shadow: 0 2px 0 #111;
}

/* 像素化输入框 */
.pixel-input {
  font-family: 'Courier New', 'Monaco', 'Menlo', monospace;
  image-rendering: pixelated;
  image-rendering: -moz-crisp-edges;
  image-rendering: crisp-edges;
}

/* 整体页面像素化效果 */
body {
  image-rendering: -moz-crisp-edges;
  image-rendering: -webkit-crisp-edges;
  image-rendering: pixelated;
  image-rendering: crisp-edges;
}